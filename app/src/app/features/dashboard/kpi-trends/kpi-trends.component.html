<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">KPI Trends</h2>

  @if (isLoading()) {
    <div class="text-center p-8 text-gray-500 dark:text-gray-400">Loading Chart...</div>
  } @else {
    <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg p-6">
      @if (viewMode === 'full') {
        <form [formGroup]="filterForm" class="flex space-x-4 mb-4">
          <label class="flex items-center space-x-2 text-gray-700 dark:text-gray-300">
            <input type="checkbox" formControlName="q1" class="form-checkbox h-5 w-5 text-indigo-600 rounded">
            <span>Q1</span>
          </label>
          <label class="flex items-center space-x-2 text-gray-700 dark:text-gray-300">
            <input type="checkbox" formControlName="q2" class="form-checkbox h-5 w-5 text-indigo-600 rounded">
            <span>Q2</span>
          </label>
          <label class="flex items-center space-x-2 text-gray-700 dark:text-gray-300">
            <input type="checkbox" formControlName="q3" class="form-checkbox h-5 w-5 text-indigo-600 rounded">
            <span>Q3</span>
          </label>
          <label class="flex items-center space-x-2 text-gray-700 dark:text-gray-300">
            <input type="checkbox" formControlName="q4" class="form-checkbox h-5 w-5 text-indigo-600 rounded">
            <span>Q4</span>
          </label>
        </form>
      }

      <ngx-charts-line-chart
        role="img"
        aria-label="Line chart showing Key Performance Indicator trends over time."
        [animations]="false"
        [view]="view"
        [scheme]="colorScheme"
        [legend]="legend"
        [showXAxisLabel]="showXAxisLabel"
        [showYAxisLabel]="showYAxisLabel"
        [xAxis]="true"
        [yAxis]="true"
        [xAxisLabel]="xAxisLabel"
        [yAxisLabel]="yAxisLabel"
        [timeline]="timeline"
        [results]="chartData()">
      </ngx-charts-line-chart>
    </div>
  }
</div>
