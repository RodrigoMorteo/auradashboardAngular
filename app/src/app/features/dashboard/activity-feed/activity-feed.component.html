<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">Live Activity Feed</h2>

  <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
    <div
      class="overflow-y-auto p-4"
      [ngClass]="scrollContainerClasses"
      (scroll)="viewMode === 'full' ? onScroll($event) : null">
      <ul class="list-none p-0 m-0">
        @for (item of activityItems(); track item.id) {
          <li
            class="border-b border-gray-200 dark:border-gray-700 last:border-b-0 flex justify-between items-center"
            [ngClass]="itemClasses"
          >
            <p
              class="text-gray-800 dark:text-gray-200 flex-grow"
              [ngClass]="actionTextClasses"
            >
              <span class="font-semibold">{{ item.user }}</span> {{ item.action }}
            </p>
            <p
              class="text-gray-500 dark:text-gray-400 text-xs ml-2 flex-shrink-0"
            >
              {{ item.timestamp | date:'shortTime' }}
            </p>
          </li>
        } 
      </ul>

      @if (isLoading()) {
        <div class="text-center py-4 text-gray-500 dark:text-gray-400">Loading more activities...</div>
      }

      @if (!hasMore() && activityItems().length > 0) {
        <div class="text-center py-4 text-gray-500 dark:text-gray-400">No more activities.</div>
      }

      @if (activityItems().length === 0 && !isLoading()) {
        <div class="text-center py-4 text-gray-500 dark:text-gray-400">No activities to display.</div>
      }
    </div>
  </div>
</div>
