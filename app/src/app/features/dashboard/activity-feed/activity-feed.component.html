<div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden h-full flex flex-col">
  <h3 class="text-lg font-semibold text-gray-800 dark:text-white p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
    Live Activity Feed
  </h3>

  @if (activityItems().length === 0 && !isLoading()) {
    <div class="flex-grow flex items-center justify-center text-gray-500 dark:text-gray-400">
      No activities to display.
    </div>
  } @else {
    <div class="overflow-y-auto flex-grow p-4" (scroll)="viewMode === 'full' ? onScroll($event) : null">
      <ul class="list-none p-0 m-0">
        @for (item of activityItems(); track item.id) {
          <li class="py-2 border-b border-gray-200 dark:border-gray-700 last:border-b-0 flex justify-between items-center">
            <p class="text-sm text-gray-800 dark:text-gray-200 flex-grow">
              <span class="font-semibold">{{ item.user }}</span> {{ item.action }}
            </p>
            <p class="text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0">
              {{ item.timestamp | date:'shortTime' }}
            </p>
          </li>
        }
      </ul>

      @if (isLoading()) {
        <div class="text-center py-2 text-sm text-gray-500 dark:text-gray-400">Loading...</div>
      }

      @if (!hasMore() && activityItems().length > 0) {
        <div class="text-center py-2 text-sm text-gray-500 dark:text-gray-400">No more activities.</div>
      }
    </div>
  }
</div>