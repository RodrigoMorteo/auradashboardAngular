<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">Recent Sales</h2>

  @if (isLoading() && salesRecords().length === 0) {
    <div class="text-center p-8 text-gray-500 dark:text-gray-400">Loading...</div>
  } @else {
    <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full leading-normal">
          <thead>
            <tr>
              @if (viewMode === 'full') {
                <th scope="col" (click)="changeSort('orderId')"
                  class="cursor-pointer border-b-2 border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-700 text-left font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-xs"
                  [ngClass]="headerClasses">
                  Order ID
                </th>
              }
              <th scope="col" (click)="changeSort('productName')"
                class="cursor-pointer border-b-2 border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-700 text-left font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-xs"
                [ngClass]="headerClasses">
                Product Name
              </th>
              @if (viewMode === 'full') {
                <th scope="col" (click)="changeSort('saleDate')"
                  class="cursor-pointer border-b-2 border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-700 text-left font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-xs"
                  [ngClass]="headerClasses">
                  Sale Date
                </th>
              }
              <th scope="col" (click)="changeSort('amount')"
                class="cursor-pointer border-b-2 border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-700 text-left font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-xs"
                [ngClass]="headerClasses">
                Amount
              </th>
            </tr>
          </thead>
          <tbody>
            @for (record of salesRecords(); track record.orderId) {
              <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                @if (viewMode === 'full') {
                  <td class="border-b border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-200" [ngClass]="cellClasses">{{ record.orderId }}</td>
                }
                <td class="border-b border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-200" [ngClass]="cellClasses">{{ record.productName }}</td>
                @if (viewMode === 'full') {
                  <td class="border-b border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-200" [ngClass]="cellClasses">{{ record.saleDate | date: 'medium' }}</td>
                }
                <td class="border-b border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-200" [ngClass]="cellClasses">{{ record.amount | currency }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      @if (viewMode === 'full') {
        <div class="px-5 py-5 bg-white dark:bg-gray-800 border-t flex flex-col xs:flex-row items-center xs:justify-between">
          <div class="inline-flex mt-2 xs:mt-0">
            <button (click)="previousPage()" [disabled]="currentPage() === 1" class="text-sm bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-l disabled:opacity-50 disabled:cursor-not-allowed">
              Prev
            </button>
            <button (click)="nextPage()" [disabled]="!hasMorePages()" class="text-sm bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-r disabled:opacity-50 disabled:cursor-not-allowed">
              Next
            </button>
          </div>
        </div>
      }
    </div>
  }
</div>
